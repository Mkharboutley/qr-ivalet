(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88],{260:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/request-handler",function(){return s(6829)}])},6829:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var l=s(7876),a=s(4232),c=s(5665),r=s(1792),i=s(5965);let n={requested:"text-yellow-600",assigned:"text-blue-600",completed:"text-green-600",cancelled:"text-gray-500",expired:"text-red-600"};function d(){let e=(0,i.sh)(),t=(0,c.aU)(e),s=(0,r.Uz)(e),[d,o]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,c.P)((0,c.rJ)(t,"tickets"),(0,c._M)("status","in",["requested","assigned"]),(0,c.My)("requestedAt","asc")),s=(0,c.aQ)(e,e=>{o(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>s()},[t]);let x=async(e,t)=>{try{let l=(0,r.Qg)(s,e);await l(t),alert("✅ ".concat(e," executed"))}catch(t){alert("❌ ".concat(e," failed: ").concat(t.message))}};return(0,l.jsx)("div",{className:"min-h-screen bg-gray-900 text-white py-10 px-4",children:(0,l.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,l.jsx)("img",{src:"/qr-anim.gif",alt:"QR animation",style:{width:120}}),(0,l.jsx)("h1",{className:"text-3xl font-bold mt-4",children:"Admin: Active Tickets"})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>{var t;return(0,l.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 shadow-lg border border-gray-700",children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold mb-2",children:["Ticket #",e.ticket_number]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Plate:"})," ",e.plate_number]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Model:"})," ",e.car_model]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Status:"})," ",(0,l.jsx)("span",{className:"".concat(n[e.status]," font-semibold"),children:e.status})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"ETA:"})," ",null!=(t=e.etaMinutes)?t:"--"," min"]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[(0,l.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",onClick:()=>x("assignWorker",{ticketId:e.id}),children:"Assign"}),(0,l.jsx)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded",onClick:()=>x("completeTicket",{ticketId:e.id}),children:"Complete"}),(0,l.jsx)("button",{className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded",onClick:()=>x("recalculateETA",{ticketId:e.id}),children:"Recalc ETA"}),(0,l.jsx)("button",{className:"bg-gray-700 hover:bg-gray-800 text-white px-3 py-1 rounded",onClick:()=>x("cancelTicket",{ticketId:e.id}),children:"Cancel"})]})]},e.id)})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(260)),_N_E=e.O()}]);