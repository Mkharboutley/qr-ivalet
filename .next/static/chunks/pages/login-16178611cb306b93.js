(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{591:e=>{e.exports={container:"login_container__83La9",wrapper:"login_wrapper__3LQR8",logo:"login_logo__t2DTB",input:"login_input__KSWam",button:"login_button__8nR0v",error:"login_error___OnvZ"}},2982:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>p});var t=r(7876),n=r(4232),s=r(9099),l=r(5282),o=r(5665),i=r(5965),u=r(591),_=r.n(u);function p(){let e=(0,i.sh)(),a=(0,l.xI)(e),r=(0,o.aU)(e),u=(0,s.useRouter)(),[p,c]=(0,n.useState)(""),[d,g]=(0,n.useState)(""),[h,m]=(0,n.useState)(""),[w,v]=(0,n.useState)(!1),x=async e=>{e.preventDefault(),v(!0),m("");try{var t;let e=await (0,l.x9)(a,p,d),n=(0,o.H9)(r,"users",e.user.uid),s=null==(t=(await (0,o.x7)(n)).data())?void 0:t.role;if("admin"===s)u.push("/admin/request-handler");else if("user"===s)u.push("/entry");else throw Error("Unauthorized role")}catch(e){m(e.message)}finally{v(!1)}};return(0,t.jsx)("div",{className:_().container,children:(0,t.jsxs)("form",{className:_().wrapper,onSubmit:x,children:[(0,t.jsx)("img",{src:"/logo.gif",alt:"i-Valet Logo",className:_().logo}),(0,t.jsx)("input",{type:"email",className:_().input,placeholder:"Email",value:p,onChange:e=>c(e.target.value),required:!0}),(0,t.jsx)("input",{type:"password",className:_().input,placeholder:"Password",value:d,onChange:e=>g(e.target.value),required:!0}),(0,t.jsx)("button",{className:_().button,type:"submit",disabled:w,children:w?"Logging in...":"Login"}),h&&(0,t.jsx)("p",{className:_().error,children:h})]})})}},7984:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(2982)}])},9099:(e,a,r)=>{e.exports=r(8253)}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(7984)),_N_E=e.O()}]);